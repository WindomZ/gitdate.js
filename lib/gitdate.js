/** * Created by WindomZ on 17-5-15. */'use strict'const co = require('co')const shell = require('shelljs')const script = require('./script')const date = require('./date')function * gitdate (param = {}) {  if (!shell.which('git')) {    throw new ReferenceError('Sorry, this script requires git')  }  let t = date(param.date,    param.year, param.month, param.day, param.hour, param.minute)  const sc = yield script()  shell.exec('git stash', {silent: true})  let code = shell.exec(sc.replace('$1', t)).code  shell.exec('git stash pop', {silent: true})  if (code !== 0) {    throw new ReferenceError('Error: failed to change the commit date')  }  return true}module.exports = (param) => co.wrap(gitdate)(param)
